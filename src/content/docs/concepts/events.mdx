---
title: Events
---
import Package from "@components/Package"
import Event from "@components/Event"

Any Membrane program can _emit_ events on their nodes and _subscribe to_ events on nodes of other programs.

For example, if you have a program that handles webhooks, a node in your program could emit a <Event name="webhookReceived" />  event, and another program could subscribe to that event.

### Emitting an event

```ts twoslash "$emit()"
// @module: esnext
// @filename: membrane.d.ts
declare module "membrane" {
  namespace resolvers {
    export interface Root {
      endpoint(req: {
        method: "GET" | "POST" | "PUT" | "PATCH" | "DELETE" | "HEAD" | "OPTIONS"
        path: string
        body?: string
        query?: string
        headers: string
      }): string
    }
  }
  /**
   * A gref to the root of this program.
   */
  export const root: Root;
}

// ---cut---
import type { root } from "membrane";

export function endpoint(req) {
  switch (`${req.method} ${req.path}`) {
    case "POST /webhook-path":
      root.webhookReceived.$emit();
  }
};
```

### Subscribing to an event

Programs can subscribe an action to handle an event. When an event is emitted, the action will be invoked with an additional parameter called `event`.

```ts twoslash "$subscribe(doSomething)"
// @module: esnext
// @filename: membrane.d.ts
type State = import("./index").State;
declare module "membrane" {
  /**
   * This object is automatically persisted by Membrane.
   * Its type is defined by the exported `State` interface
   * below.
   */
  export const state: State;
}

// ---cut---
import type { nodes } from "membrane";

export async function doSomething(_, { event }) {
  // Do something with the webhookReceived event
}

export async function configure() {
  nodes.webhookReceived.$subscribe(doSomething);
}
```
